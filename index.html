<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>N-Body Simulation (Full View Init)</title>
  <style>
    body {
      background: #111;
      color: #eee;
      font-family: sans-serif;
      text-align: center;
    }
    canvas {
      border: 1px solid #333;
      background: #000;
      margin: 10px;
    }
    input, button {
      margin: 5px;
      padding: 8px 16px;
      background: #222;
      color: #eee;
      border: 1px solid #555;
      border-radius: 5px;
    }
    button:hover {
      background: #444;
    }
  </style>
</head>
<body>
  <h2>üå† N-Body Gravity Sim ‚Äî Full Screen Init + Larger Bodies</h2>
  <canvas id="simulationCanvas" width="800" height="600"></canvas><br/>
  <label for="bodyCount">Bodies:</label>
  <input type="number" id="bodyCount" value="5" min="2" max="100" />
  <button onclick="startSimulation()">üîÅ Generate System</button>
  <button onclick="togglePause()"><span id="pauseBtnText">‚è∏Ô∏è Pause</span></button>

  <script>
    const canvas = document.getElementById("simulationCanvas");
    const ctx = canvas.getContext("2d");

    const G = 6.67430e-6;
    const TIMESTEP = 60 * 30;
    const SCALE = 1e-8; // Zoom level
    let paused = false;

    class Body {
      constructor(name, x, y, vx, vy, mass, radius, color) {
        this.name = name;
        this.x = x;
        this.y = y;
        this.vx = vx;
        this.vy = vy;
        this.mass = mass;
        this.radius = radius;
        this.color = color;
        this.trail = [];
      }

      applyGravity(bodies) {
        let ax = 0, ay = 0;
        for (let other of bodies) {
          if (other === this) continue;

          let dx = other.x - this.x;
          let dy = other.y - this.y;
          let centerDist = Math.sqrt(dx * dx + dy * dy);

          let visualRadius = (this.radius + other.radius) / SCALE;
          let softenedDist = Math.max(centerDist, visualRadius);

          let force = G * other.mass / (softenedDist * softenedDist);
          ax += force * dx / softenedDist;
          ay += force * dy / softenedDist;
        }
        this.vx += ax * TIMESTEP;
        this.vy += ay * TIMESTEP;
      }

      update() {
        this.x += this.vx * TIMESTEP;
        this.y += this.vy * TIMESTEP;
        this.trail.push([this.x, this.y]);
        if (this.trail.length > 500) this.trail.shift();
      }

      draw() {
        const cx = canvas.width / 2;
        const cy = canvas.height / 2;

        ctx.beginPath();
        for (let i = 0; i < this.trail.length - 1; i++) {
          const [x1, y1] = this.trail[i];
          const [x2, y2] = this.trail[i + 1];
          ctx.moveTo(cx + x1 * SCALE, cy + y1 * SCALE);
          ctx.lineTo(cx + x2 * SCALE, cy + y2 * SCALE);
        }
        ctx.strokeStyle = this.color + "66";
        ctx.lineWidth = 1.2;
        ctx.stroke();

        ctx.beginPath();
        ctx.arc(cx + this.x * SCALE, cy + this.y * SCALE, this.radius, 0, 2 * Math.PI);
        ctx.fillStyle = this.color;
        ctx.fill();
      }
    }

    const bodies = [];

    function startSimulation() {
      const count = Math.max(2, parseInt(document.getElementById("bodyCount").value));
      bodies.length = 0;

      const colors = ["white", "yellow", "orange", "deepskyblue", "violet", "lime", "pink", "cyan"];
      const minMass = 5e23;
      const maxMass = 5e25;
      const maxVelocity = 2e3;

      const realWidth = canvas.width / SCALE;
      const realHeight = canvas.height / SCALE;
      const xMin = -realWidth / 2;
      const yMin = -realHeight / 2;

      for (let i = 0; i < count; i++) {
        const x = xMin + Math.random() * realWidth;
        const y = yMin + Math.random() * realHeight;
        const vx = (Math.random() - 0.5) * maxVelocity;
        const vy = (Math.random() - 0.5) * maxVelocity;
        const mass = minMass + Math.random() * (maxMass - minMass);
        const radius = 8 + Math.random() * 8; // Larger visible size
        const color = colors[i % colors.length];

        bodies.push(new Body("Body" + i, x, y, vx, vy, mass, radius, color));
      }
    }

    function togglePause() {
      paused = !paused;
      document.getElementById("pauseBtnText").textContent = paused ? "‚ñ∂Ô∏è Run" : "‚è∏Ô∏è Pause";
    }

    function update() {
      for (let body of bodies) body.applyGravity(bodies);
      for (let body of bodies) body.update();
    }

    function draw() {
      ctx.fillStyle = "rgba(10, 10, 10, 0.3)";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      for (let body of bodies) body.draw();
    }

    function loop() {
      if (!paused) update();
      draw();
      requestAnimationFrame(loop);
    }

    startSimulation();
    loop();
  </script>
</body>
</html>
